<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta http-equiv='cache-control' content='no-cache'>
  <meta http-equiv='expires' content='0'>
  <meta http-equiv='pragma' content='no-cache'>
  <title>Universal Link Redirect</title>
  <style>
    #openAppButton {
      display: none;
      padding: 10px 20px;
      font-size: 16px;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    #userAgentDisplay {
      padding: 10px;
      margin: 20px;
      background-color: #f1f1f1;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-family: monospace;
      white-space: pre-wrap;
      word-break: break-all;
    }
  </style>
</head>

<body>
  <div id="userAgentDisplay"></div>
  <button id="openAppButton" onclick="window.location.href = 'https://www.grail.bz/';">
    continue
  </button>

  <script>
    const userAgent = window.navigator.userAgent.toLowerCase() || '';
    const isIOS = /iphone|ipad|ipod/.test(userAgent);
    const knownBrowsers = [
      /crios/,          // Chrome
      /fxios/,          // Firefox
      /edgios/,         // Edge
      /brave/,          // Brave
      /duckduckgo/,     // DuckDuckGo
      /opt|opios/,      // Opera Touch
      /vivaldi/,        // Vivaldi
      /alohabrowser/,   // Aloha
      /puffin/,         // Puffin
      /dolphin/,         // Dolphin
      /ucbrowser|ucweb|uc/ // UC Browser
    ];
    const isSafari = /safari/.test(userAgent) && !knownBrowsers.some(pattern => pattern.test(userAgent))

    if (isIOS) {
      if (isSafari) {
        // If Safari on iOS → automatically open the app using the universal link
        setTimeout(() => {
          window.location.href = 'https://www.grail.bz/';
        }, 500);
      } else {
        document.getElementById('userAgentDisplay').textContent = userAgent;
        // If another browser on iOS (e.g., Chrome) → show button for manual tap
        document.getElementById('openAppButton').style.display = 'inline-block';
      }
    }
    // If not iOS (e.g., Android or desktop) → do nothing
  </script>
</body>

</html>